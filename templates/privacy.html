<!DOCTYPE html>
<html lang="de" class="h-full bg-slate-100">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Datenschutz - DHBW Calendar Cleaner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
</head>
<body class="py-12 px-4">

    <div class="w-full max-w-3xl mx-auto p-8 space-y-6 bg-white rounded-2xl shadow-xl">
        <h1 class="text-3xl font-bold tracking-tight text-gray-900">
            DHBW Calendar Cleaner - Datenschutzerklärung
        </h1>
        
        <div class="prose prose-slate max-w-none text-gray-700">
            <p class="font-bold text-red-600">[[DIES IST EIN PLATZHALTER. BITTE DURCH EIGENE DATENSCHUTZERKLÄRUNG ERSETZEN.]]</p>
            
            <h2>1. Verantwortlicher</h2>
            <p>
                Tobias Maimone<br>
                [Ihre Adresse]<br>
                [Ihre E-Mail]
            </p>

            <h2>2. Verarbeitung von Daten</h2>
            <p>
                Diese Anwendung verarbeitet personenbezogene Daten, die zur Bereitstellung des Dienstes erforderlich sind.
            </p>
            <h3>a) Google OAuth 2.0</h3>
            <p>
                Wenn Sie sich über "Mit Google anmelden" authentifizieren, erhalten wir von Google folgende Daten:
            </p>
            <ul>
                <li>Ihre eindeutige Google User-ID (Sub)</li>
                <li>Ihre E-Mail-Adresse</li>
            </ul>
            <p>
                Wir speichern Ihre User-ID und Ihre E-Mail-Adresse in unserer Datenbank (in einer JSON-Datei auf dem Server), um Ihr Konto zu verwalten.
            </p>
            <h3>b) Google Kalender Daten</h3>
            <p>
                Die Anwendung fordert die Berechtigung an, auf Ihre Google Kalender zuzugreifen (`https://www.googleapis.com/auth/calendar`). Diese Berechtigung wird verwendet, um:
            </p>
            <ul>
                <li>Ereignisse aus Ihrem Quellkalender zu lesen.</li>
                <li>Ereignisse in Ihrem Zielkalender zu löschen.</li>
                <li>Gefilterte Ereignisse in Ihrem Zielkalender zu erstellen.</li>
            </ul>
            <p>
                Um den Dienst im Hintergrund (per Cronjob) ausführen zu können, speichern wir einen von Google bereitgestellten **Refresh-Token**. Dieser Token wird verschlüsselt (`Fernet`) in Ihrer Benutzer-Konfigurationsdatei auf dem Server gespeichert.
            </p>
            <h3>c) Konfigurationsdaten</h3>
            <p>
                Wir speichern die von Ihnen im Dashboard eingegebenen Daten (Quell-ID, Ziel-ID, RegEx-Filter), um den Synchronisierungsdienst auszuführen.
            </p>
            <h3>d) Log-Dateien</h3>
            <p>
                Jede Synchronisierung (manuell oder automatisch) wird in einer benutzerspezifischen Log-Datei (`<user_id>.log`) auf dem Server protokolliert. Diese Logs sind nur für den jeweiligen Benutzer im Dashboard sichtbar und werden beim Löschen des Kontos ebenfalls entfernt.
            </p>
            
            <h2>3. Datensicherheit</h2>
            <p>
                Kritische Authentifizierungsdaten (Refresh-Token) werden vor der Speicherung mit einem symmetrischen Schlüssel (AES-128-CBC) verschlüsselt.
            </p>

            <h2>4. Ihre Rechte</h2>
            <p>
                Sie haben das Recht auf Auskunft, Berichtigung und Löschung Ihrer Daten. Sie können Ihr Konto und alle zugehörigen Daten (Konfiguration, verschlüsselter Token, Log-Dateien) jederzeit über die Funktion "Konto dauerhaft löschen" im Dashboard selbst entfernen.
            </p>

        </div>

        <div class="pt-4">
             <a href="{{ url_for('index') }}" 
                class="inline-flex items-center gap-2 rounded-full bg-gray-200 px-4 py-2 font-medium text-gray-800 transition hover:bg-gray-300">
                &larr; Zurück
            </a>
        </div>
    </div>
    
    <footer class="text-center text-xs text-gray-500 py-6 space-y-1 w-full max-w-3xl mx-auto">
         <div class="flex justify-center gap-4 mb-1">
            <a href="{{ url_for('privacy_policy') }}" class="font-medium text-blue-600 hover:underline">Datenschutz</a>
            <a href="{{ url_for('terms_of_service') }}" class="font-medium text-blue-600 hover:underline">Nutzungsbedingungen</a>
        </div>
        <p>
            Mehr Projekte findest du bei 
            <a href="https://thulium-labs.de" target="_blank" rel="noopener" class="font-medium text-blue-600 hover:underline">thulium-labs.de</a>.
        </p>
        <p>Made by Tobias Maimone</p>
    </footer>

</body>
</html>